<div>
    <h1>
        <a name="_Toc250982853"></a>
        <a name="_Toc178252788"></a>
        <a name="_Toc146560036"></a>
        <a name="_Toc140307704">1. Introduction</a>
        <p>
        </p>
    </h1>
    <h2>
        <a name="_Toc250982854"></a>
        <a name="_Toc178252789"></a>
        <a name="_Toc146560037">1.1. Document Background</a>
        <p>
        </p>
    </h2>
    <h3>
        <a name="_Toc250982855"></a>
        <a name="_Toc178252790"></a>
        <a name="_Toc146560038">1.1.1. Purpose of Document</a>
        <p>
        </p>
    </h3>
    <p>
        <p>
        </p>
    </p>
    <p>
        The purpose of this document is to explain Helio Query Service Property File.
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        This document is intended for HELIO IT team members responsible for deployment and configuration of HELIO Query Service.
        <p>
        </p>
    </p>
    <h3>
        <a name="_Toc250982857">1.1.2. Assumptions Dependencies and Constrains</a>
        <p>
        </p>
    </h3>
    <p>
        <strong>
            <p>
            </p>
        </strong>
    </p>
    <p>
        1. Access URL and Format is presently hard coded; which in future will be dynamic.
        <p>
        </p>
    </p>
    <p>
        2. Access URL should be first column in VOTABLE; Similarly Format should be last column defined in VOTABLE.
        <p>
        </p>
    </p>
    <p>
        3. In Release 1 we are testing this service with HEC.
        <p>
        </p>
    </p>
    <h3>
        <a name="_Toc250982858">1.1.3. Reference Documents</a>
        <p>
        </p>
    </h3>
    <p>
        <p>
        </p>
    </p>
    <h3>
        <a name="_Toc250982859">1.1.4. Document Control</a>
        <p>
        </p>
    </h3>
    <p>
        <p>
        </p>
    </p>
    <h3>
        <a name="_Toc250982860"></a>
        <a name="_Toc126645546"></a>
        <a name="_Toc126644470"></a>
        <a name="_Toc126643771"></a>
        <a name="_Toc126642969"></a>
        <a name="_Toc126642708">1.1.5. Abbreviation Used</a>
        <p>
        </p>
    </h3>
    <p>
        HEC : Helio Event Catalogue Service.
    </p>
    <h2>
        <a name="_Toc250982861"></a>
        <a name="_Toc185690014">2. </a>
        Helio Query Service Property File
        <p>
        </p>
    </h2>
    <p>
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        <strong>jdbc.driver</strong>
        =com.mysql.jdbc.Driver
        <p>
        </p>
    </p>
    <p>
        <strong>jdbc.url</strong>
        =jdbc:mysql://msslxt.mssl.ucl.ac.uk:3306/helio
        <p>
        </p>
    </p>
    <p>
        <strong>jdbc.user</strong>
        =helio_admin
        <p>
        </p>
    </p>
    <p>
        <strong>jdbc.password</strong>
        =majorca
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        <strong>sql.query</strong>
        =select * from INSTRUEMNTS where START_DATE between
        <p>
        </p>
    </p>
    <p>
        <strong>sql.query.instr.constraint=</strong>
        and INS_ID like '%[:kwinstrument:]%'
        <strong>
            <p>
            </p>
        </strong>
    </p>
    <p>
        <strong>sql.query.orderby.constraint=</strong>
        ORDER BY INS_START_DATE
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        #Access URL should always be first in VOTABLE and Format always last in VOTable.
        <strong>
            <p>
            </p>
        </strong>
    </p>
    <p>
        <strong>
            <p>
            </p>
        </strong>
    </p>
    <p>
        <strong>sql.columnnames</strong>
        =ACCESS_URL::INS_ID::FORMAT
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        <strong>sql.columndesc</strong>
        =Url Pointing to Data File::Instrument Short Name::Format
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        <strong>sql.columnucd</strong>
        =VOX: AccessReference: ucd.ins.insid::VOX:Format
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        <strong>sql.votable.head.desc</strong>
        =Helio ICS time based query
        <p>
        </p>
    </p>
    <p>
        <strong>sql.votable.accesurl</strong>
        =http://localhost:8080/HelioQueryService/HelioQueryService
        <p>
        </p>
    </p>
    <p>
        <strong>sql.votable.format</strong>
        =GRAPHICS
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <h2>
        <a name="_Toc250982862">3. Property File Element Description</a>
        <p>
        </p>
    </h2>
    <p>
    </p>
    <table cellspacing="0" cellpadding="0" border="1">
        <tbody>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>jdbc.driver</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        JDBC driver name.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>jdbc.url</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        JDBC Url with database name.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>jdbc.user</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        Database User Name.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>jdbc.password</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        Database password.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.query</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        SQL query string with time constrain.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>
                            sql.query.instr.constraint
                            <p>
                            </p>
                        </strong>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        SQL constrain with Instrument.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>
                            sql.query.orderby.constraint
                            <p>
                            </p>
                        </strong>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        SQL order by clause.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.columnnames</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        VOTABLE column names (Included ACCESS URL and FORMAT; See assumption for more details).
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.columndesc</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        VOTable column description
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.columnucd</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        VOTable column UCD names.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.votable.head.desc</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        VOTable heading (Description of heading).
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.votable.accesurl</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        Hardcoded Access URL for VOTABLE.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign="top" width="295">
                    <p>
                        <strong>sql.votable.format</strong>
                        <p>
                        </p>
                    </p>
                </td>
                <td valign="top" width="295">
                    <p>
                        Hardcoded Format.
                        <p>
                        </p>
                    </p>
                </td>
            </tr>
        </tbody>
    </table>
    <p>
        <p>
        </p>
    </p>
    <h2>
        5. Configuration of property file per context
        <p>
        </p>
    </h2>
    <p>
        Bellow is the steps to be followed to configure property file per context.
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        1. Add &lt;Resource&gt; tag inside &lt;context&gt; tag. As shown bellow
        <p>
        </p>
    </p>
    <p>
        &lt;Resource name=<em>"property/context"</em> auth=<em>"Container"</em>
        <p>
        </p>
    </p>
    <p>
        type=<em>"java.lang.String"</em>
        <p>
        </p>
    </p>
    <p>
        factory=<em>"com.org.helio.common.util.BeanFactory"</em>
        <p>
        </p>
    </p>
    <p>
        propertyValue=<em>"C:/log/helio.txt"</em>/&gt;
        <p>
        </p>
    </p>
    <p>
        2. In the above &lt;Resource&gt; tag you can see a factory element referring to a Bean Factory class. Code for retrieving property Value is implemented
        in this class.
        <p>
        </p>
    </p>
    <p>
        3. “propertyValue” element in &lt;Resource&gt; tag is the actual path of the property file. When I say “path” it is path appended with file name as
        shown.
        <p>
        </p>
    </p>
    <p>
        4. “type” element in &lt;Resource&gt; tag defines the return type which is a String in our case.
        <p>
        </p>
    </p>
    <p>
        5. If you are configuring in Tomcat server, &lt;Resource&gt; tag should be included in server.xml under &lt;context&gt; tag.
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
        <h2>
            5. Note
            <p>
            </p>
        </h2>
        <p>
            <p>
            </p>
        </p>
        <p>
1. Column Names ( sql.columnnames); Column Description (sql.columndesc) ; Column UCD(sql.columnucd ) values should be separated by “            <strong>:: </strong>”.
            <p>
            </p>
        </p>
        <p>
            2. Access URL should always be first and Format should always be last while defining Column Names similarly in Column Description and Column UCD.
            <p>
            </p>
        </p>
        <p>
            <p>
            </p>
        </p>
        <p>
            <p>
            </p>
        </p>
        <p>
            <p>
            </p>
        </p>
        <p>
            <p>
            </p>
        </p>
        <h2>
            <a name="_Toc250982863">6. Query Service Output Sample</a>
            <p>
            </p>
        </h2>
        <p>
            <p>
            </p>
        </p>
        <p>
            &lt;?xml version="1.0" encoding="UTF-16"?&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;helio:queryResponse xmlns:helio="http://helio.org/xml/QueryService/v1.0"&gt;&lt;VOTABLE version="1.1"
            xmlns="http://www.ivoa.net/xml/VOTable/v1.1"&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;RESOURCE&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;DESCRIPTION&gt;Helio ICS time based query&lt;/DESCRIPTION&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;TABLE nrows="1"&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;FIELD arraysize="*" datatype="char" name="<strong>ACCESS_URL</strong>" ucd="VOX:AccessReference"&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;DESCRIPTION&gt;Url Pointing To Data File&lt;/DESCRIPTION&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/FIELD&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;FIELD arraysize="*" datatype="char" name="<strong>INS_ID</strong>" ucd="ucd.ins.insid"&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;DESCRIPTION&gt;Instrument Short Name&lt;/DESCRIPTION&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/FIELD&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;FIELD arraysize="*" datatype="char" name="<strong>FORMAT</strong>" ucd="VOX:Format"&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;DESCRIPTION&gt;Format&lt;/DESCRIPTION&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/FIELD&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;DATA&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;TABLEDATA&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;TR&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;TD&gt;http://localhost:8080/HelioQueryService/HelioQueryService&lt;/TD&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;TD&gt;HXT&lt;/TD&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;TD&gt;GRAPHICS&lt;/TD&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/TR&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/TABLEDATA&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/DATA&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/TABLE&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/RESOURCE&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/VOTABLE&gt;
            <p>
            </p>
        </p>
        <p>
            &lt;/helio:queryResponse&gt;
            <p>
            </p>
        </p>
        <p>
        </p>
    </p>
    <p>
        <p>
        </p>
    </p>
    <p>
    </p>
    <p>
    </p>
</div>